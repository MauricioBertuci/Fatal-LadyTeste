<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meus Favoritos - Fatal Lady</title>
    <link
      rel="icon"
      href="/static/uploads/img/main_icon/icon.png"
      type="image/png"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='css/favoritos.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='css/home-style.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='css/layout-responsive.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='css/cart-badge.css') }}"
    />
  </head>
  <body data-is-authenticated="{% if usuario %}true{% else %}false{% endif %}">
    {% include "_header_nav.html" %}

    <main>
      <section id="favorites-page" class="favorites-wrapper">
        <div class="container">
          <div class="card-header" aria-hidden="false">
            <h2>Meus favoritos</h2>
            <p>Veja os produtos que você salvou na Fatal Lady.</p>
          </div>
      
          {% if not favoritos or favoritos|length == 0 %}
            <div class="favorites-empty">
              <h3>Você ainda não tem favoritos.</h3>
              <p>
                Explore o catálogo e clique no coração para salvar seus produtos
                preferidos.
              </p>
              <a href="/produtos" class="btn-outline">
                Ver catálogo
              </a>
            </div>
            
          {% else %}
            {# BLOCO COM FAVORITOS #}
            <div class="favorites-meta">
              <span>{{ favoritos|length }} produto(s) salvo(s)</span>
              <a href="/produtos" class="favorites-link">
                Continuar comprando
              </a>
            </div>

            <div class="featured-grid">
              {% for produto in favoritos %}
                <article class="featured-card favorite-card">
                    <div class="featured-image">
                      <img
                        src="{{ produto.caminhoimagem or '/static/uploads/img/catalogo/products/default.png' }}"
                        alt="{{ produto.nome }}"
                        loading="lazy"
                      />
                      <div class="favorite-badge">
                        &#10084;
                      </div>
                    </div>

                    <div class="featured-info">
                      <span class="featured-category">
                        {{ produto.categoria_nome or 'Coleção Fatal Lady' }}
                      </span>

                      <h3 class="featured-name">
                        {{ produto.nome }}
                      </h3>

                      <div class="favorite-price-row">
                        <span class="featured-price">
                          R$
                          {{ "%.2f"|format(produto.preco)|replace('.', ',') }}
                        </span>
                      </div>
                    </div>
                  </a>

                  <div class="favorite-actions">
                    <form
                      action="{{ url_for('delete_favorite', id_produto=produto.id_produto) }}"
                      method="post"
                    >
                      <button type="submit" class="favorite-remove-btn">
                        Remover dos favoritos
                      </button>
                    </form>

                    <form action="/produto-get/{{ produto.id_produto }}" method="get">
                      <button type="submit" class="btn-outline favorite-cart-btn">
                        Ver produto
                      </button>
                    </form>

                </article>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </section>
    </main>
    <footer role="contentinfo">
      <div class="footer-links">
        <div>
          <h4>Minha Conta</h4>
          <a href="/me/dados">Meus Dados</a>
          <a href="/me/meus-pedidos">Meus Pedidos</a>
          <a href="/me/painel">Cashback</a>
          <a href="/login">Login</a>
        </div>

        <div>
          <h4>Suporte e Políticas</h4>
          <a href="/politicas/trocas/devolucoes">Trocas e Devoluções</a>
          <a href="/faq">Dúvidas Frequentes</a>
          <a href="/faleconosco">Fale Conosco</a>
          <a href="/privacy">Política de Privacidade</a>
        </div>
        <div>
          <h4>Formas de Pagamento</h4>
          <img
            src="/static/uploads/img/catalogo/footer/payment.png"
            alt="Formas de Pagamento"
          />
        </div>
      </div>
      <hr />
      <p class="copy">
        Coffe and Code | © 2025 Todos os direitos reservados
      </p>
    </footer>

  </body>
</html>